server:
  port: 8095

# 暴露监控端点 配置
management:
  endpoints:
    # web端点配置属性
    web:
      # 默认端点前缀为/actuator，可修改
      base-path: /actuator
      exposure:
        # 包含端点，全用直接使用'*'即可，多个场景['prometheus','health']
        include: [ 'prometheus','health' ]
        # 排除端点
        exclude: [ 'shutdown' ]
  metrics:
    tags:
      application: ${spring.application.name}
  prometheus:
    metrics:
      export:
        descriptions: true
        enabled: true

# springdoc-openapi项目配置
springdoc:
  api-docs:
    enabled: true
    path: /v3/api-docs
  swagger-ui:
    path: /swagger-ui.html
    enabled: true
    tags-sorter: alpha
    operations-sorter: alpha
    show-extensions: true
    config-url: /v3/api-docs/swagger-config
    urls:
      - name: gateway-service
        url: /v3/api-docs
  default-flat-param-object: true

spring:
  application:
    name: gateway-service
    version: '@project.version@'
  profiles:
    active: '@profiles.active@'
    include: nacos
  cloud:
    # Spring Cloud Gateway 配置项，对应 GatewayProperties 类
    gateway:
      server:
        webflux:
          # 添加favicon.ico路由
          routes:
            - id: favicon_route
              predicates:
                - Path=/favicon.ico
              filters:
                - SetStatus=NO_CONTENT
              uri: no://op
            # 新增：处理 .well-known 路径的路由
            - id: well_known_devtools_route
              predicates:
                - Path=/.well-known/appspecific/com.chrome.devtools.json
              filters:
                - SetStatus=NO_CONTENT
              uri: no://op
          discovery:
            locator:
              enabled: true
              lower-case-service-id: true
              url-expression: "'lb://' + serviceId"
